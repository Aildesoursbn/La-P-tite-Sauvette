<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La P'tite Sauvette</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Roboto',sans-serif;background:#f7f5f0;color:#3b3b3b;scroll-behavior:smooth;}
header{background:#2E5F3B;position:fixed;top:0;width:100%;padding:15px 0;z-index:1000;border-radius:0 0 20px 20px;}
nav ul{display:flex;justify-content:center;gap:25px;list-style:none;}
nav a{color:#fff;text-decoration:none;font-weight:700;padding:10px 25px;border-radius:20px;background:rgba(255,255,255,0.15);transition:.3s;}
nav a:hover,.active{background:rgba(255,255,255,.35);}
main{padding-top:100px;display:flex;flex-direction:column;align-items:center;}
.hero-image{width:80%;max-width:750px;height:300px;margin:25px auto;position:relative;border-radius:20px;overflow:hidden;box-shadow:0 6px 20px rgba(0,0,0,.25);}
.hero-image img{width:100%;height:100%;object-fit:cover;opacity:.6;transition:transform .6s;}
.hero-image:hover img{transform:scale(1.05);}
.hero-image h2{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:2.2em;text-align:center;text-shadow:2px 2px 6px rgba(0,0,0,.5);}
section{width:90%;max-width:900px;padding:50px 25px 70px; margin:25px 0;min-height:100vh;display:flex;flex-direction:column;align-items:center;gap:25px;background:#fdfbf2;border-radius:20px;box-shadow:0 6px 15px rgba(0,0,0,.15);opacity:0;transform:translateY(50px);transition:.8s;}
section.visible{opacity:1;transform:translateY(0);}
section h2{font-size:2.2em;margin-bottom:15px;color:#4b6533;}
section p,blockquote.citation{font-size:1.2em;line-height:1.6;color:#555c4a;}
blockquote.citation{text-align:center;font-style:italic;max-width:800px;}
#read-more-btn,form button{margin-top:10px;padding:10px 20px;border:none;border-radius:20px;background:#2E5F3B;color:#fff;font-weight:bold;cursor:pointer;transition:.3s;}
#read-more-btn:hover,form button:hover{background:#1a1a1a;transform:scale(1.05);}
.media-list{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;margin-top:15px;}
.media-item{width:220px;height:140px;border-radius:15px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.15);transition:.4s;}
.media-item:hover{transform:scale(1.05);box-shadow:0 6px 18px rgba(0,0,0,.25);}
.contact-box,form{background:#fff;padding:15px 20px;border-radius:15px;box-shadow:0 3px 8px rgba(0,0,0,.1);}
form{display:flex;flex-direction:column;gap:15px;width:100%;max-width:500px;}
form input,form textarea{padding:10px;border-radius:10px;border:1px solid #ccc;width:100%;font-size:1em;}
form .error{color:red;font-size:.9em;}
form .success{color:green;font-size:1em;text-align:center;}
footer{text-align:center;padding:25px 0;background:#2E5F3B;color:#fff;border-radius:20px 20px 0 0;font-weight:bold;}
#map-markets{width:100%;max-width:650px;height:350px;border-radius:20px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.15);margin-top:20px;}
.map-legend{display:flex;justify-content:center;gap:20px;margin-top:10px;font-size:14px;}
.map-legend i{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;}
.audio-btn{position:fixed;top:20px;right:20px;font-size:28px;cursor:pointer;color:#fff;background:rgba(0,0,0,.4);padding:8px 12px;border-radius:50%;z-index:2000;transition:.3s;}
.audio-btn:hover{background:rgba(0,0,0,.7);}
.audio-btn.muted{text-decoration:line-through;}
h3{margin-top:25px;color:#2E5F3B;font-size:1.6em;text-align:center;}
</style>
</head>
<body>

<header><nav><ul>
  <li><a href="#accueil" class="active">Accueil</a></li>
  <li><a href="#medias">M√©dias</a></li>
  <li><a href="#contact">Contact</a></li>
</ul></nav></header>

<div id="audio-toggle" class="audio-btn">üîä</div>
<audio id="background-audio" loop><source src="sons/ambiance.mp3" type="audio/mpeg">Votre navigateur ne supporte pas l‚Äôaudio.</audio>

<main>
<div class="hero-image"><img src="images/axonometrie.jpg" alt="Axonometrie"><h2>Bienvenue √† La P'tite Sauvette</h2></div>

<section id="accueil">
<p>Mara√Æchage Biologique</p>
<blockquote class="citation">
<span id="short-text">Petite ferme paysanne, situ√©e sur la commune de Saint-Sauvant, au milieu des plaines du seuil du Poitou...</span>
<span id="full-text" style="display:none;">Petite ferme paysanne, situ√©e sur la commune de Saint-Sauvant, au milieu des plaines du seuil du Poitou. Nous pratiquons une agriculture vivri√®re dans le simple but de produire des l√©gumes de bonne qualit√©. Faiblement m√©canis√©, nous travaillons donc majoritairement √† la main. Avec les ann√©es, nous avons con√ßu un √©cosyst√®me agricole riche en auxiliaires de culture qui devient un environnement-outil de travail complet, dynamique et r√©silient.

Nous avons besoin des insectes, oiseaux, rongeurs, rapaces, mammif√®res pour ne pas acheter de produits. Et nous avons, avec les habitants de la commune, replant√© la plaine avec des haies diverses et vari√©es. Offrant ainsi le g√Æte et le couvert √† cette fameuse biodiversit√©.</span>
</blockquote>
<button id="read-more-btn">Lire plus</button>
<div class="ventes"><h3>Points de vente :</h3>
<ul>
<li>Vendredi matin 8h-12h au march√© de Rouill√©</li>
<li>Vendredi apr√®s-midi 13h-19h au march√© de Saint-Sauvant</li>
<li><a href="#" target="_blank">La Clique Paysanne (mardi)</a></li>
<li><a href="#" target="_blank">Le Clic Paysan (vendredi)</a></li>
</ul></div>
<h3>La carte des copains</h3>
<div id="map-markets"></div>
<div class="map-legend"><div><i style="background:#2E5F3B"></i> March√©s</div><div><i style="background:#FF5733"></i> Producteurs</div></div>
</section>

<section id="medias"><h2>M√©dias</h2><div class="media-list" id="media-list"></div></section>
<section id="contact"><h2>Contact</h2>
<form id="contact-form">
<input type="text" id="name" placeholder="Nom et Pr√©nom" required>
<input type="text" id="phone" placeholder="Num√©ro de t√©l√©phone" required>
<input type="email" id="email" placeholder="Adresse email" required>
<textarea id="message" placeholder="Votre message" rows="5" required></textarea>
<div class="error" id="form-error"></div>
<button type="submit">Envoyer</button>
<div class="success" id="form-success"></div>
</form>
</section>
</main>
<footer>laptitesauvette@gmail.com</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
// EmailJS
emailjs.init("zmJKXZGvDw5FdO3q9");
// Lire plus / moins
const btn=document.getElementById('read-more-btn'),shortText=document.getElementById('short-text'),fullText=document.getElementById('full-text');
btn.addEventListener('click',()=>{fullText.style.display==='none'? (fullText.style.display='inline',shortText.style.display='none',btn.textContent='Lire moins'):(fullText.style.display='none',shortText.style.display='inline',btn.textContent='Lire plus');});
// Galerie
["images/photos/aillet.jpg","images/photos/betterave1.jpg","images/photos/salade.jpg","images/photos/chinois1.jpg","images/photos/radis.jpg","images/photos/epinard.jpg","images/photos/carotte.jpg","images/photos/chinois2.jpg"].forEach(src=>{const div=document.createElement('div');div.className='media-item';const img=document.createElement('img');img.src=src;img.alt='';img.style.width='100%';img.style.height='100%';img.style.objectFit='cover';div.appendChild(img);document.getElementById('media-list').appendChild(div);});
// Nav active & reveal
const sections=document.querySelectorAll("section"),navLinks=document.querySelectorAll("nav a");
function updateNav(){let current='';sections.forEach(s=>{if(pageYOffset>=s.offsetTop-150) current=s.id;});navLinks.forEach(l=>l.classList.remove('active'));document.querySelector('nav a[href="#'+current+'"]')?.classList.add('active');}
function reveal(){sections.forEach(s=>{if(s.getBoundingClientRect().top<window.innerHeight-100)s.classList.add('visible');});}
window.addEventListener('scroll',()=>{updateNav();reveal();});window.addEventListener('load',()=>{updateNav();reveal();});
// Carte
var map=L.map('map-markets').setView([46.39,0.05],11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap contributors'}).addTo(map);
[{coords:[46.4199,0.0404],name:"March√© de Rouill√©"},{coords:[46.3592,0.0558],name:"March√© de Saint-Sauvant"}].forEach(m=>L.circleMarker(m.coords,{color:'#2E5F3B',radius:8,fillOpacity:.8}).addTo(map).bindPopup(m.name));
[{coords:[46.2782,-0.0471],name:"Florenda - ferme florale - Mara√Æchage"},
{coords:[46.4606,0.2295],name:"La Ferme du Chant du Bois - Fromages de ch√®vres"},
{coords:[46.4513, 0.3329],name:"EARL des Pervenches - Fromages de ch√®vres"},
{coords:[46.3484,0.34],name:"Au Gaby'O maraicher - Mara√Æchage"},
{coords:[46.3565, -0.0988],name:"Champ de la Source - Mara√Æchage"},
{coords:[46.4840, 0.2355],name:"La Graine de Ferme - Mara√Æchage"},
{coords:[46.3013, 0.0496],name:"Les Jardins du Tilleul - Mara√Æchage"},
{coords:[46.0440, -0.0489],name:"GAEC Le pain des Fontaines - Paysans Boulangers"},
{coords:[46.2582, -0.1198],name:"Les P√¢tes d'ici de l√† - Paysan Pastier"},
{coords:[46.2935, 0.3515],name:"La Ferme des Branjardi√®res - oeufs"},
{coords:[46.4277, 0.2903],name:"GAEC La ferme des Clou√®res - Mara√Æchage, viande de porc"},
{coords:[46.5169, 0.4270],name:"La Folie Berg√®re - Mara√Æchage, √©levage moutons, fromage, viandes, laine, petits-fruits, fruits"},
{coords:[46.3813, 0.5813],name:"GAEC La Ferme de la Quinati√®re - Mara√Æchage"},
].forEach(f=>L.circleMarker(f.coords,{color:'#FF5733',radius:8,fillOpacity:.8}).addTo(map).bindPopup(f.name));
map.fitBounds([[46.4199,0.0404],[46.3592,0.0558],[46.2782,-0.0471],[46.4606,0.2295],[46.4456,0.2458],[46.3484,0.34],[46.3012,0.0496]]);
// Formulaire
document.getElementById('contact-form').addEventListener('submit',e=>{e.preventDefault();
const name=document.getElementById('name').value.trim(),phone=document.getElementById('phone').value.trim(),email=document.getElementById('email').value.trim(),message=document.getElementById('message').value.trim(),errorDiv=document.getElementById('form-error'),successDiv=document.getElementById('form-success');
errorDiv.textContent='';successDiv.textContent='';
if(!name||!phone||!email||!message){errorDiv.textContent='Merci de renseigner tous les champs.';return;}
emailjs.send('service_ascwn4c','template_pidwx9q',{name,phone,email,message}).then(()=>{successDiv.textContent='Message envoy√© avec succ√®s !';document.getElementById('contact-form').reset();}).catch(()=>{errorDiv.textContent='Erreur lors de l\'envoi. R√©essayez plus tard.';});});
// Son
const audio=document.getElementById("background-audio"),btnAudio=document.getElementById("audio-toggle");
audio.volume=1.0;window.addEventListener("load",()=>{audio.play().catch(()=>{});});
btnAudio.addEventListener("click",()=>{audio.paused?(audio.play(),btnAudio.classList.remove("muted"),btnAudio.textContent="üîä"):(audio.pause(),btnAudio.classList.add("muted"),btnAudio.textContent="üîá");});
</script>
</body>
</html>
